<div class="container py-3">
    <main class="form-signin w-100 m-auto">
      <form [formGroup]="form">
        <h1 class="h3 mb-3 fw-normal">New post form</h1>

        <div class="form-floating">
            <input
              type="text"
              class="form-control"
              id="titleField"
              formControlName="title"
              autocomplete="off"
              [class.is-invalid]="title.invalid && title.touched"
              [class.is-valid]="title.valid && title.touched"
            />
            <label for="titleField">Title</label>
            <div
              *ngIf="title.invalid && title.touched"
              class="text-danger"
            >
              <div *ngIf="title.errors?.['required']">Title is required</div>
              <div *ngIf="title.errors?.['title']">Please fill a good title</div>
            </div>
        </div>

        <div class="form-floating my-3">
          <select
            class="form-control" id="categoryField"
            formControlName="categoryId"
            [class.is-invalid]="categoryId.invalid && categoryId.touched"
            [class.is-valid]="categoryId.valid && categoryId.touched"

          >
            <option *ngFor="let category of categories" [value]="category.uuid">{{ category.name }}</option>
          </select>
          <label for="categoryField">Category</label>
          <div
            *ngIf="categoryId.invalid && categoryId.touched"
            class="text-danger"
          >
            <div *ngIf="categoryId.errors?.['required']">A category is required</div>
          </div>
        </div>


        <div class="form-group my-4">
            <label for="contentField">Content</label>
            <textarea
              class="form-control" id="contentField"
              rows="4"
              formControlName="content"
              [class.is-invalid]="content.invalid && content.touched"
              [class.is-valid]="content.valid && content.touched"
            ></textarea>
            <div
              *ngIf="content.invalid && content.touched"
              class="text-danger"
            >
              <div *ngIf="content.errors?.['required']">Dont let your post empty</div>
            </div>
        </div>


        <!--[disabled]="!form.valid"-->
        <button
          [disabled]="!form.valid"
          class="btn btn-primary w-100"
          type="button"
          (click)="onSubmit()"
        >
          Post
        </button>
      </form>
    </main>
  </div>
